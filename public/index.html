<!DOCTYPE html>
<html lang="pt-PT">
<head>
<meta charset="UTF-8">
<title>Agregador Notícias PT</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;background:#0f172a;color:#e5e7eb;font-family:system-ui}
header{padding:16px;background:#020617}
main{max-width:1100px;margin:auto;padding:16px}
input,select,button{padding:10px;border-radius:20px;border:none}
button{background:#6366f1;color:#fff}
.card{background:#020617;margin-top:12px;padding:12px;border-radius:12px}
small{color:#9ca3af}
a{color:#6366f1;text-decoration:none}
</style>
</head>
<body>

<header><h2>Agregador de Notícias PT</h2></header>

<main>
<input id="q" placeholder="AV, PR, Benfica, SCP..." style="width:60%">
<select id="t">
<option value="2">Últimas 2 horas</option>
<option value="12">Últimas 12 horas</option>
<option value="24" selected>Últimas 24 horas</option>
<option value="48">Últimas 48 horas</option>
<option value="0">Sem filtro</option>
</select>
<button onclick="go()">Pesquisar</button>

<div id="r"></div>
</main>

<script>
async function go(){
  const q=document.getElementById("q").value;
  const t=document.getElementById("t").value;
  const r=document.getElementById("r");
  r.innerHTML="";

  const res=await fetch(`/api/noticias?q=${encodeURIComponent(q)}&hours=${t}`);
  const data=await res.json();

  data.forEach(n=>{
    r.innerHTML+=`
    <div class="card">
      <small>${n.fonte} · ${new Date(n.data).toLocaleString("pt-PT")}</small>
      <h3><a href="${n.url}" target="_blank">${n.titulo}</a></h3>
      <p>${n.resumo}</p>
      <a href="${n.video}" target="_blank">Ver vídeos ▶</a>
    </div>`;
  });
}
</script>

</body>
</html>
